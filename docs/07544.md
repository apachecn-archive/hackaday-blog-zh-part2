# 如何备份和恢复您的 IP 摄像机固件

> 原文：<https://hackaday.com/2014/11/11/how-to-backup-and-restore-your-ip-camera-firmware/>

[Filipe]一直在研究廉价 IP 摄像机的定制固件。具体来说，他一直在使用基于普通 HI3815 芯片的相机。当你像这样摆弄固件时，一个主要的问题是你可能最终会使设备变得无用。[Filipe]记录了一个相对简单的方法来备份[并恢复这些相机上的固件](http://felipe.astroza.cl/hacking-hi3815-based-ip-camera/ "IP camera firmware backup")，这样你就可以随心所欲地入侵了。

这次攻击的第一部分是面向硬件的。[Filipe]打开相机，露出印刷电路板。该板标有串行 TX 和 RX 焊盘。在将几根电线焊接到这些衬垫上之后，[Filipe]使用 USB 转串行转换器将他的计算机连接到相机的串行端口上。

当相机启动时，任何终端程序现在都应该能够以 115200 波特的速度连接到相机。诀窍是在启动阶段按下“回车”。这允许您在没有密码的情况下以 root 用户身份登录。接下来，您可以重置 root 密码并重启相机。从现在起，您可以通过 telnet 连接到电话，并以 root 用户身份登录。

从这里，[Filipe]使用 dd 命令将摄像机的所有分区复制到 NFS 共享。他提到，如果您愿意，也可以使用 FTP 来完成这项工作。至此，固件备份完成。

知道如何恢复备份与知道如何创建备份一样重要。[Filipe]构建了一个简单的 TFTP 服务器，并将固件映像分两部分复制到其中，每部分不到 5MB。最后一步是告诉相机如何找到图像。首先你需要使用串口让相机回到 U-Boot 提示符下。然后配置摄像机的 IP 地址和 TFTP 服务器的 IP 地址。最后，通过 TFTP 将每个分区复制到 RAM 中，然后复制到闪存中。一旦所有五个分区都被复制，你的备份就安全地恢复了，你的相机就可以活着被黑客攻击了。