# 用试错法和 I2C 法修复键盘固件

> 原文:[https://hack aday . com/2013/08/20/fix-a-keyboards-firmware-with-trial-error-and-I2C/](https://hackaday.com/2013/08/20/fix-a-keyboards-firmware-with-trial-error-and-i2c/)

![eepromKeyboardFlash](../Images/f12a992da7442c9582a973f4111509a5.png)

如果您键盘上的媒体快捷键由于固件过时而无法正常工作，制造商可能会建议您将其发送给他们进行更新。[阿尔瓦罗]不在乎等那么久，所以他[打开它，并自学如何修改 EEPROM](http://alvarop.com/2013/08/kinesis-freestyle-2-keyboard-mod-to-fix-media-keys/)。结果是一份整理键盘内部的详细记录。在里面，他发现了一个他忽略的 USB 集线器和一个他攻击的键盘控制器芯片。两张数据表和一张原理图之后，[Alvaro]打开逻辑分析仪，将物理按键与它们输出的键盘代码进行比较。

他转储整个 EEPROM，然后通过 I2C 快速刷新，将“下一首歌”键改为输出字母“a”。这似乎行得通，因此[阿尔瓦罗]在 HID USB 使用表中梳理一些代码，并猜测哪些代码将正确控制 Spotify。他将媒体键从“扫描下一个”和“扫描上一个”转换为“倒带”和“快进”问题解决了。

[Alvaro]在打开这个键盘之前对键盘一无所知。如果你还没有把东西拆开来看看它们是如何工作的，如何修理它们，希望他的成功能说服你去探索和了解你家里的那些“黑匣子”。而且，如果你以前从未使用过 I2C——或者认为它可能是一个男孩乐队的名字——去看看[凯文的]关于用手敲打 I2C 的教程。