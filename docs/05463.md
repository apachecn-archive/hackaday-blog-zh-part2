# hack aday 68k:LED 闪烁

> 原文:[https://hack aday . com/2014/03/05/hack aday-68k-blinking-a-led/](https://hackaday.com/2014/03/05/hackaday-68k-blinking-a-led/)

![freerun](../Images/1937a23c07553d1e06d36251bc0dfba6.png)

又到了 Hackaday 68k(T1)的更新时间了，这款 16 位逆向计算机是在 hack aday 上开发的，用来展示我们对老式硬件和[我们新项目托管网站](http://projects.hackaday.com/)的热爱。各位，还是有邀请的。趁热吃吧。

这篇文章将涵盖一个简单的 68000 系统到底有多复杂。答案是，“不太会。”一个简单的 68k 系统至少比我们在这里看到的其他自制系统设计简单。是的，16 位数据总线意味着到处都有更多的电线，但就像她说的，只是因为它更大并不意味着它更难。

关于 Hackaday 68k 的构建有一些进展要报告。已验证处理器在指示灯闪烁的情况下工作正常。这是计算机设计的“Hello World ”,至少和用 Arduino 闪烁 LED 一样复杂。

你需要点击“阅读更多”链接。

* * *

#### 简单 68000 系统杂志

这个项目的目的至少有一半是为了证明 68000 非常适合(甚至简单)自制计算机项目。很少碰到黑客热线的自制系统通常基于 6502 CPU，或者至少是该家族中的某个处理器。现在，我们如何比较一个简单的 6502 和 68000 系统？用两个芯片描述一个简单的系统怎么样？

##### 构建简单的 6502 系统

对于一个简单的 6502 系统，你需要 6502 本身、一些 RAM 和一个 EEPROM。这么说吧，我们将使用 62256 SRAM 作为 RAM，28256 EEPROM 作为 ROM。连线内存开始$0000，并确保你有一些 EEPROM 在$FFFF。几个与非门可以作为逻辑粘合剂。将 RAM 的 A14 引脚接地，您将拥有一个 16k RAM、32k ROM 和大量空间来放置任何外围设备的基本系统。

加上一个 6551 ACIA，你就有了一个串行端口。用一点胶合逻辑和一个 MAX232 芯片，你可以制作一个运行 BASIC 的简单 6502 系统。在 16 条地址线和 8 条数据线上加一个引脚头，你就有了一个使用 7 个芯片的可扩展系统:

*   6502 CPU
*   28256 EEPROM
*   62256 SRAM
*   6551 号
*   MAX232 系列产品
*   74HC04 和 74HC00 逻辑'粘合'

连接这些线路包括使用地址线进行解码，使用 **R/W** 和 **Phi2** 线进行内存控制，并将时钟信号和复位电路放在某个地方。你需要一个晶体，一些电容，一些电阻和一个复位按钮，但是现在你有了:一个简单的 6502 系统。你可以在一个周末的时间里在实验板上完成这个。不。很大。成交。

##### 构建简单的 68000 系统

![The pinout for the 68k. You don't even need most of these pins.](../Images/a5971099474ca91f4addca54dd711449.png)

The pinout for the 68k. You don’t even need most of these pins.

“但是 68000 要复杂得多！”，你哭了，“有更多的引脚！16 个，这还只是数据线！BGACK 是什么鬼？”我不是说你错了，但我确实选择忽略你。如果您知道要忽略哪些引脚，构建一个简单的 68000 系统其实非常容易:

*   **/dtak**&**/berr**

DTACK 是 70 年代后期出现的非常小而慢的存储器的产品。 **DTACK** 背后的想法是让 RAM(或 ROM，或其他什么)确认它从数据总线上获得了所需的数据。如果 RAM(或其他任何东西)没有及时把这个引脚拉低，CPU 将进入“等待状态”；基本上 68000 只会坐在那里，直到公羊赶上。

现在，有了快速、巨大的 SRAMs 和现代元件，你就不用担心这个了。接地 **DTACK** 就没事了。做你的时间计算，但你会没事的。

**BERR** 是总线错误引脚，告诉 CPU MMU 有问题，有一个“无响应设备”，或者其他足够复杂的东西，它不应该包含在最小系统中。将此引脚连接到+5 V。

*   总线仲裁控制； **/BR** 、 **/BG** 、&、 **/BGACK**

这些引脚用于 DMA。我们在这里做一个简单的系统，所以没有 DMA。将 **BGACK** 和 **BR** 连接到+5 V，忽略 **BG** 。完成了。

*   中断控制； **/IPL0** 、 **/IPL1** 、&、 **/IPL2**

中断？同样，我们在做一个简单的系统，有一些 RAM、ROM 和一个串口。把这些绑在+5 上。

*   M6800 外设控制； **E** 、 **/VPA** 、&、 **/VMA**

设计 68000 的老 Moto 工程师非常酷，他们给了 68000 系统设计师一种方法，将老的 6800 系列部件——acia、显示处理器、RIOT、pia、软盘控制器——连接到 68000 上。这些大头针是你怎么做的。我们会用到这些零件吗？没有吗？很好。将 **/VPA** 绑定到+5，忽略 **/VMA** 和 **E.**

*   处理器状态引脚； **FC0** ， **FC1** ，&， **FC2**

这些引脚告诉系统的其余部分，CPU 当前是处于用户模式还是管理模式，这种东西对于 MMU 来说很方便。我们用的是 MMU 吗？然后忽略这些引脚。

那么，我们该怎么办呢？我们有 16 个数据引脚、23 个地址引脚和一些其他引脚:我们可以将**复位**和**停止**连接在一起。异步总线控制引脚、 **/AS** 、 **/UDS** 、 **/LDS** 、&、 **R/W** 是进行适当的存储器解码和控制所需要的全部。

与 6502 相比如何？对于 8 位芯片，你需要使用 ****R/W** 引脚来判断你是在读还是在写，65xx 上的 **Phi2** 引脚类似于 68k 上的 **/AS** 引脚。实际上，如果你用 68000 设计一些东西，它和 8 位芯片之间唯一真正的区别是 **/UDS** 、&/T15】/LDS 引脚，它们只用于访问 D0-D7 或 D8-D15。**

 **68000 的筹码数量？你需要一个 CPU、两个 8 位 RAM 芯片、两个 8 位 EEPROMs、某种 ACIA 和一点胶合逻辑。你最多可以用一打筹码做到。芯片之间有更多的导线或迹线，但这无关紧要。

所以你走吧。对于自制项目来说，68000 *而不是*过于复杂是一个合理的理由。

* * *

#### LED 闪烁

计算机设计的“Hello World”是自由运行处理器。所有这一切意味着让 CPU 在它的地址空间内循环，指令硬连线到数据引脚上，将一个 LED 连接到一个更高的地址引脚上，并打开它。指示灯将根据时钟速度和指示灯连接的引脚闪烁。这是视频:

[https://www.youtube.com/embed/GyuEAc3A7qs?version=3&rel=1&showsearch=0&showinfo=1&iv_load_policy=1&fs=1&hl=en-US&autohide=2&wmode=transparent](https://www.youtube.com/embed/GyuEAc3A7qs?version=3&rel=1&showsearch=0&showinfo=1&iv_load_policy=1&fs=1&hl=en-US&autohide=2&wmode=transparent)T2】

这就是 68000，所有数据引脚都接地，忽略了 **/AS** 、 **/UDS** 、 **/LDS** 、& **R/W** 引脚，以及一个 [Maxim DS1813](http://datasheets.maximintegrated.com/en/ds/DS1813.pdf) 复位芯片来处理上电和按钮复位。我用一个 4 兆赫的振荡器运行它。有人想猜猜这个 LED 和哪个地址引脚相连吗？

我想指出的是，由于 68000 有 68000 个晶体管，我仍然有可能使用比 Arduino 更少的晶体管来闪烁 LED。如果 Atmel 的任何人对 ATMega 上的晶体管数量有更精确的统计，请在评论中留言。

* * *

#### 下一步是什么

不幸的是，在闪烁一个 LED 和下一个“看我做了什么！”贴吧。对 RAM、ROM 和外设的地址解码需要花费很多心思，对这些芯片进行布线也需要大量的工作。以下是 RAM 板的当前状态:

![RAM](../Images/50a442279978a5df267c57d23d6cbe59.png)

这是八个 512k x 8 SRAM 芯片，数据和地址线都连接在一起。蓝色是数据，绿色是地址。我不太确定我用了多长时间来包装所有这些别针，因为我是以《深空九号》第九集(T1)为单位来计算时间的。我可以告诉你，绕线，DS9，和六罐装啤酒是我最接近幸福的东西。

在下一篇文章中，我将讨论 RAM、ROM、我将用于串行端口的任何东西以及总线收发器的地址解码和存储器控制逻辑。然后我将不得不把这些电路包起来。不是一个快速的工作。一点代码烧到 EEPROM 上，然后我就有东西可以炫耀了。会很棒的。

在那之前，你可以查看我在黑客日项目上的进度。**