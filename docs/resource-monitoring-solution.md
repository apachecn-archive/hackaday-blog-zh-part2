# 资源监控解决方案

> 原文：<https://hackaday.com/2015/03/25/resource-monitoring-solution/>

电、气和水是我们日常生活中至关重要的三种资源。使用现代技术监测它们有助于保护，但真正的影响来自于我们使用现有数据来减少长期的浪费使用。[Sébastien]很尴尬，因为他的锅炉在年度检查中发现了问题。调查显示，问题发生在 4 个月前，导致净损失超过 450 立方米，相当于每天 3750 升(每天约 25 次洗澡！).作为一个自称的极客，生活在一个现代的“互联”家庭，这让他非常恼火。由此产生了[S-Energy——一种能源监控解决方案](http://sebastien.warin.fr/2015/03/24/2478-senergy-la-solution-de-monitoring-des-ressources-energetiques-de-la-maison-geek-is-in-da-house-2015/) ( [翻译为](https://translate.google.com/translate?sl=auto&tl=en&js=y&prev=_t&hl=en&ie=UTF-8&u=http%3A%2F%2Fsebastien.warin.fr%2F2015%2F03%2F24%2F2478-senergy-la-solution-de-monitoring-des-ressources-energetiques-de-la-maison-geek-is-in-da-house-2015%2F&edit-text=)),它使用树莓 Pi、Arduino、一些其他硬件和一些智能软件来检查电力、天然气和水的消耗。

[Sébastien]想要一个系统来警告不正常的消费，并鼓励他的家人减少消费。他的第一个障碍是米本身。这三家公用事业公司都使用了相当陈旧的技术，电表没有现代计量中常见的脉冲数据输出。他本来可以更换旧的仪表，但那要花他很多钱。因此，他想出了一种从现有电表中提取数据的方法。对于电表，他想到了使用电流钳，但放弃了这个想法，认为它们更适合瞬时读数，并且在测量累积功耗时容易出现显著漂移。最终，他发现了一个非常巧妙的方法。他拿了一个槽型光耦合器，把它切成两半，并把它作为一个逆向反射传感器，用来检测旧机电式仪表的转盘上的黑带。圆盘每转一圈相当于 4 瓦特小时。稍加计算，他就能推断出所用的瓦特小时和安培数。该传感器连接到 Arduino Pro-mini，然后通过 nRF24L01+模块将数据发送到位于他房子内的主电路。电子设备安装在一个小外壳中，光传感器看起来就像贴在仪表上一样。他有一个对准红外线光传感器的好建议——用相机检查一下(手机相机也可以)。

水表更难。它有一个 8 位数的机械计数器，随着用水量的增加而增加。他的解决方案是使用 Raspberry-Pi 及其相关的摄像头模块。圆周率照相机的焦距固定在无限远，所以他必须调整镜头使其处于“微距”模式。他需要一些发光二极管照明，因为仪表在黑暗的地方。

燃气表是最简单的，因为它可以加装脉冲计数器。Raspberry-Pi 接收摄像头照片、来自燃气表的脉冲数据(通过 LAN 电缆 hack)，以及从电表接收数据的 nRF24L01+模块。然后他继续描述他的“星座”软件——一个他希望很快开源的项目。使用 OpenCV 解码水表数字有一些有趣的地方——特别是当数字在转换时。如果解码出现错误，他会收到一封电子邮件，其中包含相关的快照。所有这些最终形成一个漂亮的 HTML 页面，以图形方式显示数据。他还做了很多其他的数据处理来生成图表。

该系统让他对使用情况了如指掌，尤其是当他搬出房子的时候。比如洗衣机打开了。他还做了一些音频集成(使用他的另一个软件项目 S-Sound)，例如，现在它会宣布淋浴时使用的水量。这是有助于慢慢减少消费的有用反馈。